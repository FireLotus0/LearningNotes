### 蓝牙协议  
#### 介绍：
1. 无线通信技术标准，让固定设备和移动设备实现短距离通信，使用2.4--2.485GHz的短波高频无线电波通信。
2. 技术类型：
    - 基础率(BR)/增强数据率(EDR)技术类型：以点对点网络拓扑结构进行一对一设备通信
    - 低功耗(LE)技术类型:使用多种网络拓扑结构，实现一对一，一对多，多对多通信

#### 版本：
1. 蓝牙2.x + EDR  
  加入“非跳跃窄频通道”，不需要与每个设备交换应答信号，可以用来将各种器件的蓝牙服务概要同时广播到巨量的蓝牙器件，支持多个速度水平，一些未加密信息可以使用该版本发送给设备，例如：实时交通时刻表，基本的交通畅通性信息，高级交通指示等。  
2. 蓝牙3.0 + HS  
  该版本使用交替射频技术，***提高资料传输率***，集成802.11 PAL并且最高速度达到24Mbps，是蓝牙2.0速度的8倍，引入增强电源控制，功耗明显降低  
3. 蓝牙4.x  
  蓝牙诞生至今唯一的一个综合协议规范，包括：
  - 高速蓝牙：主攻数据交换与传输  
  - 传统蓝牙： 主攻信息沟通和设备连接  
  - 低功耗蓝牙： 主攻不需占用太多带宽的设备连接，将传输距离提升到100米以上。
4. 蓝牙5.0  
  蓝牙5.0是4.2LE版本蓝牙传输距离的4倍，传输速度是4.2LE版本的2倍。蓝牙5.0还支持室内定位导航功能（结合WIFI）可以实现精度小于1米的室内定位，针对物联网进行了很多底层优化。

#### 版本总结
蓝牙4.0版本以后，技术上分为***低功耗蓝牙（BLE）***和***经典蓝牙（BR/EDR）***两种，市场芯片多数仅支持BLE，二者都支持的是双模蓝牙芯片

#### 协议栈：主机 + HCI（可选） + 控制器
* 主机（Host）：由核心协议层(L2CAP, SDP, SMP, ATT)和(GAP, GATT)构成
* 控制器(Controller)：分为低功耗蓝牙(Vol: Low Energy Controller) 和 经典蓝牙(Vol2: BR/EDR Controller)
* HCI：主机和控制器之间的通信接口标准，可以是UART,USB等

#### 术语
* GAP规范：通用接入规范，定义所有蓝牙设备的基础功能，设备间发现，连接，配对绑定的流程；蓝牙设备中的四种角色；广播报文，响应报文的格式；蓝牙参数（设备地址，名称，配对秘钥，设备外观值）。
* ATT(属性协议)：定义访问对端设备上数据的规则，定义Host端属性报文格式和报文类型，是GATT的基础，是低功耗蓝牙的基础
* GATT（通用属性规范）：位于ATT之上，定义属性的类型和使用方法。没有GATT，BLE协议栈也能跑，但互联互通就会出问题。
* L2CAP(链路控制和适配协议)：屏蔽控制器传输协议中许多特性，方便高层协议的开发，报文分片和重组，流量控制，重传，报文完整性校验等

